{"version":3,"sources":["../src/utils.js"],"names":["sortMax","data","sort","a","b","order_id","mergeKeyVal","arr","dimension","i","length","elem","mergeKeyArrayVal","order","o","subElem","push","findDistinct","Array","from","Set","getLineStartTime","line","highlightColor","hexColor","rgb","hexToRgb","r","g","rgbToHex","componentToHex","hex","shorthandRegex","replace","m","result","exec","parseInt","c","toString","appEvents","hostname","window","location","influxHost","postgRestHost","get","Promise","resolve","reject","xhr","XMLHttpRequest","open","url","onreadystatechange","handleResponse","onerror","e","send","readyState","status","res","JSON","parse","responseText","statusText","post","alert","type","title","msg","emit","showModal","html","src","modalClass","model","copyObject","json","stringify","obj"],"mappings":"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","file":"utils.js","sourcesContent":["import { appEvents } from 'app/core/core'\n\nconst hostname = window.location.hostname\nexport const influxHost = 'http://' + hostname + ':8086/'\nexport const postgRestHost = 'http://' + hostname + ':5436/'\n\nexport const get = url => {\n  return new Promise((resolve, reject) => {\n      var xhr = new XMLHttpRequest()\n      xhr.open('GET', url)\n      xhr.onreadystatechange = handleResponse\n      xhr.onerror = e => reject(e)\n      xhr.send()\n\n      function handleResponse () {\n      if (xhr.readyState === 4) {\n          if (xhr.status === 200) {\n          var res = JSON.parse(xhr.responseText)\n          resolve(res)\n          } else {\n          reject(this.statusText)\n          }\n      }\n      }\n  })\n}\n\nexport const post = (url, line) => {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest()\n    xhr.open('POST', url)\n    xhr.onreadystatechange = handleResponse\n    xhr.onerror = e => reject(e)\n    xhr.send(line)\n\n    function handleResponse () {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          // console.log('200');\n          var res = JSON.parse(xhr.responseText)\n          resolve(res)\n        } else if (xhr.status === 204) {\n          // console.log('204');\n          res = xhr.responseText\n          resolve(res)\n        } else {\n          reject(this.statusText)\n        }\n      }\n    }\n  })\n}\n\nexport const alert = (type, title, msg) => {\n  appEvents.emit('alert-' + type, [title, msg])\n}\n\nexport const showModal = (html, data) => {\n  appEvents.emit('show-modal', {\n    src: 'public/plugins/smart-factory-production-schedule-gantt-chart-panel/partials/' + html,\n    modalClass: 'confirm-modal',\n    model: data\n  })\n}\n\nexport function sortMax(data){\n  return data.sort((a, b) => b.order_id - a.order_id)\n}\n\nexport const copyObject = obj => {\n  const json = JSON.stringify(obj)\n  return JSON.parse(json)\n}\n\nexport function mergeKeyVal(arr, dimension){\n  let data = {}\n  for (let i = 0; i < arr.length; i++) {\n    const elem = arr[i];\n    data[dimension[i]] = elem\n  }\n  return data\n}\n\nexport function mergeKeyArrayVal(arr, dimension){\n  let data = []\n  for (let i = 0; i < arr.length; i++) {\n    const elem = arr[i];\n    let order = {}\n    for (let o = 0; o < elem.length; o++) {\n      const subElem = elem[o];\n      order[dimension[o]] = subElem\n    }\n    data.push(order)\n  }\n  return data\n}\n\nexport function findDistinct(arr){\n  return Array.from(new Set(arr))\n}\n\n/**\n * pass in the line, return the line's default start time\n * @param {*} line \n */\nexport function getLineStartTime(line){\n  return '6:00:00'\n}\n\nexport function highlightColor(hexColor){\n  const rgb = hexToRgb(hexColor)\n  rgb.r >= 235 ? rgb.r = 255 : rgb.r += 20\n  rgb.g >= 235 ? rgb.g = 255 : rgb.g += 20\n  rgb.b >= 235 ? rgb.b = 255 : rgb.b += 20\n  return rgbToHex(rgb.r, rgb.g, rgb.b)\n}\n\nfunction rgbToHex(r, g, b){\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b)\n}\n\nfunction hexToRgb(hex) {\n  let shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n      return r + r + g + g + b + b;\n  });\n\n  let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n  } : null;\n}\n\nfunction componentToHex(c){\n  let hex = c.toString(16)\n  return hex.length === 1 ? \"0\" + hex : hex;\n}\n\n\n\n"]}